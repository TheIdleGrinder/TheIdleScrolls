@using TheIdleScrolls_Core
@using TheIdleScrolls_Web.CoreWrapper

@inject CoreWrapperModel CoreWrapper

<div class="framed">
    <ul>
        @foreach(var item in Items)
        {
            <li class="@(CssUtilities.GetClassesForItem(item))" @ondblclick=@(() => EquipItem(item.Id))>
                @item.Name
            </li>
        }
    </ul>
</div>

@code {
    List<ItemRepresentation> Items => CoreWrapper.Inventory;

    protected override void OnInitialized()
    {
        CoreWrapper.StateChanged += StateHasChanged;
        base.OnInitialized();
    }

    void EquipItem(uint id)
    {
        CoreWrapper.InputHandler.EquipItem(CoreWrapper.Character.Id, id);
    }
}
